<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>

<ui:composition template="/layout/simple-beauty-template.xhtml">
	<ui:define name="body">
		<rich:panel>
			<f:facet name="header">
				<h:outputText
					value="Ανάλυση Διδακτικών Κενών - Πλεονάσματα και Ελλείματα ανα Ειδικότητα" />
			</f:facet>

			<h:form>
				<h:panelGrid columns="1">


					<rich:panel>
						<f:facet name="header">
							<h:outputText value="Φίλτρα Ανάλυσης" />
						</f:facet>

						<ui:include src="/components/messages-component.xhtml" />

						<h:panelGrid columns="5">

							<s:decorate id="establishedDateDecoration"
								template="/layout/doubleLineEdit.xhtml">
								<ui:define name="label">
									<h:outputText value="Ημερομηνία Εφαρμογής" />
								</ui:define>
								<rich:calendar id="effectiveDate" enableManualInput="true"
									value="#{teachingVoidBySpecializationReport.effectiveDay}"
									required="false" inputSize="10" mode="ajax" locale="el_GR"
									inputClass="fieldValueText" datePattern="dd-MM-yyyy">
									<a4j:support event="onblur"
										reRender="establishedDateDecoration" bypassUpdates="true"
										ajaxSingle="true" />
								</rich:calendar>
							</s:decorate>
							<s:decorate template="/layout/doubleLineEdit.xhtml">
								<ui:define name="label">
									<h:outputText value="Μονάδα" />
								</ui:define>

								<h:inputText id="specificSchoolUnit" styleClass="fieldValueText">

									<rich:suggestionbox for="specificSchoolUnit" var="schoolUnit"
										suggestionAction="#{schoolUnitSuggester}">
										<f:facet name="nothingLabel">
											<h:outputText value="Άγνωστη Σχολική Μονάδα" />
										</f:facet>
										<h:column>
											<h:outputText value="#{schoolUnit.title}" />
										</h:column>
										<a4j:support ajaxSingle="true" event="onselect">
											<f:setPropertyActionListener value="#{schoolUnit}"
												target="#{teachingVoidBySpecializationReport.school}" />
										</a4j:support>
									</rich:suggestionbox>
								</h:inputText>
							</s:decorate>

							<s:decorate template="/layout/doubleLineEdit.xhtml">
								<ui:define name="label">
									<h:outputText value="Περιοχή Σχολικών Μονάδων" />
								</ui:define>

								<h:selectOneMenu
									value="#{teachingVoidBySpecializationReport.region}">
									<f:selectItem itemLabel="Όλες οι Περιοχές" itemValue="" />
									<f:selectItem itemLabel="Α Ηρακλείου" itemValue="Α" />
									<f:selectItem itemLabel="Β Ηρακλείου" itemValue="Β" />
								</h:selectOneMenu>
							</s:decorate>


						</h:panelGrid>
					</rich:panel>
					<rich:spacer height="5" />
					<rich:separator lineType="dashed" height="2" />
					<rich:spacer height="5" />

					<h:panelGroup>

						<s:div styleClass="actionButtons">
							<h:panelGrid columns="3">
								<a4j:commandButton value="Επεξεργασία ...."
									action="#{teachingVoidBySpecializationReport.foo()}"
									reRender="schoolTeachingResourcesAnalysisTable" />
								<s:button action="#{secondmentReportByType.runReport}"
									value="Εκτύπωση (PDF)" target="new" disabled="true" />
								<s:button id="backButton" action="backButton"
									value="Τέλος Εργασίας" />
							</h:panelGrid>
						</s:div>
					</h:panelGroup>
				</h:panelGrid>


				<rich:dataTable id="schoolTeachingResourcesAnalysisTable"
					value="#{teachingVoidBySpecializationReport.reportData}"
					var="_schoolTeachingResources" rows="40" border="0"
					onRowMouseOver="this.style.backgfroundColor='#F8F8F8'"
					onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
					width="100%">
					<f:facet name="header">

						<rich:columnGroup>
							<rich:column rowspan="2">
								<h:outputText value="Σχολική Μονάδα" />
							</rich:column>
							<rich:column colspan="4">
								<h:outputText value="Αναλύση, μπλά, μπλά, μπλά. ....." />
							</rich:column>
							<rich:column breakBefore="true">
								<h:outputText value="Ειδικότητα" />
							</rich:column>
							<rich:column>
								<h:outputText value="Απαιτούμενες Ώρες" />
							</rich:column>
							<rich:column>
								<h:outputText value="Διαθέσιμες Ώρες" />
							</rich:column>
							<rich:column>
								<rich:spacer />
							</rich:column>
						</rich:columnGroup>
					</f:facet>

					<rich:column colspan="5">
						<h:outputText
							value="#{_schoolTeachingResources.school.ministryCode}" />
						<h:outputText value="#{_schoolTeachingResources.school.title}" />
						<h:outputText
							value="#{_schoolTeachingResources.school.regionCode} ΗΡΑΚΛΕΙΟΥ" />
						<h:outputText value="#{_schoolTeachingResources.school.points}" />
						<h:outputText
							value="#{_schoolTeachingResources.school.address.address} #{_schoolTeachingResources.school.address.number} - #{_schoolTeachingResources.school.address.postCode} - #{_schoolTeachingResources.school.address.city}" />

					</rich:column>


					<rich:subTable id="lla" var="_lala"
						value="#{_schoolTeachingResources.teachingResources}" rows="120"
						border="0" onRowMouseOver="this.style.backgfroundColor='#F8F8F8'"
						onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
						width="100%">
						<rich:column>
							<rich:spacer />
						</rich:column>
						
						<rich:column>
							<h:outputText value="#{_lala.specializationGroup.title}" />
						</rich:column>
						<rich:column>
							<h:outputText value="#{_lala.required}" />
						</rich:column>
						<rich:column>
							<h:outputText value="#{_lala.total}" />
						</rich:column>
						<rich:column>
							<h:graphicImage value="http://chart.apis.google.com/chart?chs=250x100&amp;chd=t:#{_lala.total}|#{_lala.required}&amp;cht=bhs&amp;chco=4D89F9,C6D9FD" />
						</rich:column> 
					</rich:subTable>


					<f:facet name="footer">
						<rich:datascroller for="schoolTeachingResourcesAnalysisTable">
							<f:facet name="first">
								<h:outputText value="Πρώτη" />
							</f:facet>
							<f:facet name="last">
								<h:outputText value="Τελευταία" />
							</f:facet>
						</rich:datascroller>
					</f:facet>
				</rich:dataTable>
			</h:form>
		</rich:panel>

		<ui:include src="/components/wait-modal-panel.xhtml" />
	</ui:define>
</ui:composition>
</html>
