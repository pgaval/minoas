<?xml version="1.0" encoding="UTF-8"?>
<pageflow-definition xmlns="http://jboss.com/products/seam/pageflow"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://jboss.com/products/seam/pageflow http://jboss.com/products/seam/pageflow-2.0.xsd"
  name="createTeachingVoid">

  <start-state name="start">
    <transition to="has school ?" />
  </start-state>

  <decision name="has school ?" expression="#{school ne null}">
    <transition name="true" to="createTeachingVoid" />
    <transition name="false" to="selectSchool">
      <action expression="#{schoolSearch.schoolSearch()}" />
    </transition>
  </decision>

  <page name="selectSchool" view-id="/schoolSearch.xhtml">
    <redirect />
    <transition name="selectSchool" to="createTeachingVoid">
      <action expression="#{schoolSearch.selectSchool(school)}" />
    </transition>
  </page>

  <page name="createTeachingVoid" view-id="/createTeachingVoid.xhtml">
    <redirect />
    <transition name="addTeachingHours" to="createTeachingVoid">
      <action expression="#{voidManagement.addTeachingResource()}" />
    </transition>
    <transition name="removeTeachingResource" to="createTeachingVoid">
      <action
        expression="#{voidManagement.removeTeachingResource(teachingResource)}" />
    </transition>
    <transition name="save" to="createTeachingVoidResult">
      <action expression="#{voidManagement.saveCreatedTeachingVoid}" />
    </transition>
    <transition name="cancel" to="home">
      <action expression="#{voidManagement.cancel}" />
    </transition>
    <transition name="changeSchool" to="selectSchool">
      <action expression="#{schoolSearch.schoolSearch()}" />
    </transition>
    
    <transition name="manageSchoolVoids" to="manageSchoolVoids"></transition>
  </page>
  
  <page name="createTeachingVoidResult" view-id="/createTeachingVoid.xhtml">
    <transition name="createAnotherTeachingVoid" to="createTeachingVoid">
      <action expression="#{voidManagement.beginCreateAnotherTeachingVoid()}" />
    </transition>
    <transition name="changeSchool" to="selectSchool">
      <action expression="#{voidManagement.beginCreateTeachingVoid()}" />
      <action expression="#{schoolSearch.schoolSearch()}" />
    </transition>
    <transition name="cancel" to="home">
      <action expression="#{voidManagement.cancel}" />
    </transition>
  </page>

  
  <page name="home" view-id="/home.xhtml">
    <end-conversation/>
    <redirect />
   </page>

</pageflow-definition>