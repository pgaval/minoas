<?xml version="1.0" encoding="UTF-8"?>
<pageflow-definition
    xmlns="http://jboss.com/products/seam/pageflow"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://jboss.com/products/seam/pageflow http://jboss.com/products/seam/pageflow-2.0.xsd"
  name="school-record">
  
  <start-state name="start">
		<transition to="isSchoolSelected" />
	</start-state>
	
	<decision name="isSchoolSelected" expression="#{schoolRecord.hasActiveSchool}">
		<transition to="schoolRecordPage" name="true" />
		<transition to="searchSchoolPage" name="false" />
	</decision>
	
	<page name="schoolRecordPage" view-id="/school.xhtml">
		<redirect />
		<transition to="searchSchoolPage" name="select-other-school"/>
		<transition to="home" name="close-school-record">
			<action expression="#{schoolRecord.end}" />
		</transition>
	</page>
	<page name="searchSchoolPage" view-id="/schools.xhtml">
		<redirect />
		<transition to="schoolRecordPage" name="school-selected">
			<action expression="#{schoolSearch.selectSchool}"></action>
		</transition>
	</page>
	
	<page name="home" view-id="/home.xhtml">
		<end-conversation/>
		<redirect />
	</page>
</pageflow-definition>