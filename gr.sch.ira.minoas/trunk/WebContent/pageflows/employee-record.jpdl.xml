<?xml version="1.0" encoding="UTF-8"?>

<pageflow-definition xmlns="http://jboss.com/products/seam/pageflow"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://jboss.com/products/seam/pageflow http://jboss.com/products/seam/pageflow-2.0.xsd" name="employee-record">
  
  	<start-state name="start">
		<transition to="hasActiveEmployee"></transition>
	</start-state>
	
  	<decision name="hasActiveEmployee" expression="#{employeeRecord.hasActiveEmployee()}">
		<transition name="true" to="employeePage" />
		<transition name="false" to="employeeSearchPage" />
	</decision>
	
  	<page view-id="/employees.xhtml" name="employeeSearchPage" >
  		<description>Καρτέλα Εκπαιδευτικού - Αναζήτηση</description>
  		<redirect/>
    	<transition name="search" to="employeeSearchPage">
        	<action expression="#{employeeSearch.search}" />
    	</transition>
    
    <transition name="searchByVATNumber" to="employeeSearchPage">
        <action expression="#{employeeSearch.searchByVATNumber}" />
    </transition>
    
    <transition name="searchByRegistryID" to="employeeSearchPage">
        <action expression="#{employeeSearch.searchByRegistryID}" />
    </transition>
    
    <transition to="employeePage" name="employee-selected">
        <action expression="#{employeeSearch.select()}" />
        <action expression="#{employeeRecord.search()}" />
    </transition>
    
  </page>
   
   <page view-id="/employee.xhtml" name="employeePage">
   		<description>Καρτέλα Εκπαιδευτικού - #{employeeUtil.prettyFormat(activeEmployee)}</description>
    	<redirect/>
    	<transition to="employeeSearchPage" name="back" />
   </page> 
   
  	
  	
    
   
  <page view-id="/home.xhtml" name="home">
    <end-conversation/>
    <redirect />
  </page>
	
  
  
  
</pageflow-definition>