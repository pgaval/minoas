<?xml version="1.0" encoding="UTF-8"?>

<pageflow-definition name="createTeachingVoid">

  <start-state name="start">
    <transition to="has school ?" />
  </start-state>

  <decision name="has school ?" expression="#{manageVoid.hasSchool()}">
    <transition name="true" to="createTeachingVoid" />
    <transition name="false" to="selectSchool">
      <action expression="#{schoolSearch.schoolSearch()}" />
    </transition>
  </decision>
    
  <page name="selectSchool" view-id="/schoolSearch.xhtml">
    <redirect />
    <transition name="next" to="createTeachingVoid">
      <action expression="#{manageVoid.setSchool(school)}" />
    </transition>
  </page>
  
  <page name="createTeachingVoid" view-id="/createTeachingVoid.xhtml">
    <redirect />
    <transition name="addTeachingResource" to="createTeachingVoid">
      <action expression="#{manageVoid.addTeachingResource()}" />
    </transition>
    <transition name="removeTeachingResource" to="createTeachingVoid">
      <action expression="#{manageVoid.removeTeachingResource(teachingResource)}" />
    </transition>
    <transition name="saveCreatedTeachingVoid" to="manageSchoolVoids">
      <action expression="#{manageVoid.end}" />
      <action expression="#{manageSchoolVoids.search(school)}" />
    </transition>
    <transition name="cancelCreatedTeachingVoid" to="home">
      <action expression="#{manageVoid.cancel}" />
    </transition>
    <transition name="changeSchool" to="selectSchool">
      <action expression="#{schoolSearch.schoolSearch()}" />
    </transition>
  </page>
  
 <page name="manageSchoolVoids" view-id="/manageSchoolVoids.xhtml">
    <redirect />
  </page>
  
  <page name="home" view-id="/home.xhtml">
    <redirect />
  </page>

</pageflow-definition>