<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                             "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j">
    <s:div>
    	<p>
    		Για να εισάγετε ένα νέο διδακτικό κενό στην επιλεγμένη σχολική μονάδα, συμπληρώστε πρώτα 
    		την ειδικότητα που αφορά το κενό και κατόπιν το σύνολο των διδακτικών ωρών που απαιτούνται 
    		σε ειδανικές συνθήκες να καλύψουν το συγκεκριμένο κενό.
    	</p>
    	<rich:spacer width="1" height="15" title="Here is a spacer..."/>
    	<p>
    		Στην συνέχεια και αν οι καταστάσεις το επιτρέπουν, εισάγετε την κατανομή του κενού σε 
    		διδασκόμενες ώρες και αυτό κατα τύπο.
    	</p>
    </s:div>
	<a4j:outputPanel id="voidView">
		<h:form id="insertVoid">
			<h:outputLabel value="Ειδικότητα" />
			<h:inputText value="#{teachingVoid.specialisation}"
				id="voidSpecialization" required="true">
				<f:converter converterId="specializationConverter" />
			</h:inputText>
			<rich:suggestionbox height="150" width="250" border="1" tokens=",["
				rules="none" for="voidSpecialization"
				suggestionAction="#{specializationFinder.suggestSpecialization}"
				var="result" fetchValue="#{result.id}"
				nothingLabel="Ανύπαρκτη Ειδικότητα">
				<h:column>
					<h:outputText value="#{result.id}" />
				</h:column>
				<h:column>
					<h:outputText value="#{result.title}" />
				</h:column>
			</rich:suggestionbox>
			<h:outputLabel value="Διδακτικές Ώρες :" />
			<h:inputText id="teachingHours" value="#{teachingVoid.requiredHours}" />
			<a4j:commandButton id="addTeachingResource"
				value="Προσθήκη Κάλυψης  ..." reRender="voidView"
				action="#{voidManagement.addTeachingResource}" />
			<rich:dataTable onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
				onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
				cellpadding="0" cellspacing="0"
				rendered="#{teachingVoid.teachingResources != null and teachingVoid.teachingResources.size > 0}"
				width="700" border="0" var="teachingResource"
				value="#{teachingVoid.teachingResources}">
				<f:facet name="header">
					<rich:columnGroup>
						<rich:column>
							<h:outputText value="Καλυπτόμενες Ώρες" />
						</rich:column>
						<rich:column>
							<h:outputText value="Τύπος Προσωπικού" />
						</rich:column>
						<rich:column>
							<h:outputText value="Ενέργεια" />
						</rich:column>
					</rich:columnGroup>
				</f:facet>

				<rich:column>
					<h:inputText id="teachingHours" value="#{teachingResource.teachingHours}" />
				</rich:column>

				<rich:column>
					<h:selectOneMenu id="teachingType" value="#{teachingResource.teacherType}">
						<s:enumItem enumValue="PERMANENT" label="Μόνιμος" />
						<s:enumItem enumValue="REPLACEMENT" label="Αναπληρωτής" />
						<s:enumItem enumValue="HOURLYBASED" label="Ωρομίσθιος" />
					</h:selectOneMenu>
				</rich:column>
				
				<rich:column>
					<a4j:commandLink value="Διαγραφή" action="#{voidManagement.removeTeachingResource(teachingResource)}" reRender="voidView"/>
				</rich:column>
				

			</rich:dataTable>
			
			<h:commandButton id="createTeachingVoid" value="Αποθήκευση Κενού"
				action="#{voidManagement.end}" />
			<h:commandButton id="createTeachingVoid" value="Ακύρωση Κενού"
				action="#{voidManagement.cancel}" />
		</h:form>
	</a4j:outputPanel>
</ui:composition>