<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:s="http://jboss.com/products/seam/taglib">

<ui:composition template="#{theme.template}">
	<ui:define name="body">
		<rich:panel bodyClass="post" headerClass="pagetitle">
			<f:facet name="header">
				<h:outputText value="Διαχείρηση Ρόλων ..." />
			</f:facet>
			<s:div>
				<h:outputText
					value="Στον παρακάτω πίνακα εμφανίζονται οι διαθέσιμοι ρόλοι που έχουν οριστεί στο σύστημα." />
				<s:button action="#{roleManagement.end()}" value="Τέλος Διαχείρησης"
					view="/home.xhtml" />
			</s:div>

			<h:panelGrid columns="1" width="100%">

				<h:messages globalOnly="true" showDetail="true" />
				<h:panelGroup>
					<h:form>
						<a4j:outputPanel ajaxRendered="true">
							<rich:dataTable id="existingRoleListing" width="100%" rows="10"
								rendered="#{roles.rowCount gt 0}" var="a_role" value="#{roles}">
								<f:facet name="header">
									<h:outputText value="Διαθέσιμοι Ρόλοι" />
								</f:facet>

								<rich:column>
									<f:facet name="header">
										<h:outputText value="Όνομα Ρόλου" />
									</f:facet>
									<h:outputText value="#{a_role.id}" />
								</rich:column>
								<rich:column>
									<f:facet name="header">
										<h:outputText value="Περιγραφή Ρόλου" />
									</f:facet>
									<a4j:commandLink id="updateRoleLink" value="#{a_role.title}"
										action="#{roleManagement.selectRole}"
										oncomplete="javascript:Richfaces.showModalPanel('updateRoleTitlePanel');">
									</a4j:commandLink>
								</rich:column>
								<rich:column>
									<f:facet name="header">
										<h:outputText value="Ενέργεια ..." />
									</f:facet>
									<a4j:commandLink id="removeRoleLink" value="Διαγραφή Ρόλου"
										action="#{roleManagement.selectRole}"
										oncomplete="javascript:Richfaces.showModalPanel('removeRolePanel');">
									</a4j:commandLink>

								</rich:column>
								<f:facet name="footer">
									<rich:datascroller align="right" for="existingRoleListing"
										maxPages="10" id="sc1" renderIfSinglePage="false" />
								</f:facet>
							</rich:dataTable>
						</a4j:outputPanel>
					</h:form>
				</h:panelGroup>

				<h:panelGroup>
					<a4j:form>
						<a4j:outputPanel>
							<rich:panel>
								<f:facet name="header">Δημιουργεία Νέου Ρόλου</f:facet>

								<h:panelGrid columns="2">
									<s:decorate id="roleNameDecoration"
										template="/layout/edit.xhtml">
										<ui:define name="label">Όνομα Ρόλου</ui:define>
										<h:inputText value="#{newRole.id}" required="true" size="16"
											maxlength="32">
											<a4j:support event="onblur" reRender="roleNameDecoration"
												bypassUpdates="true" />
											<f:validateLength minimum="5" maximum="32" />
										</h:inputText>
									</s:decorate>
									<s:decorate id="roleTitleDecoration"
										template="/layout/edit.xhtml">
										<ui:define name="label">Περιγραφή Ρόλου</ui:define>
										<h:inputText id="roletitle" value="#{newRole.title}" size="30"
											maxlength="250">
											<a4j:support event="onblur" reRender="roleTitleDecoration"
												bypassUpdates="true" />
										</h:inputText>
									</s:decorate>
									<a4j:commandButton value="Καταχώρηση ..."
										action="#{roleManagement.saveRole()}" />
								</h:panelGrid>
							</rich:panel>
						</a4j:outputPanel>
					</a4j:form>
				</h:panelGroup>
			</h:panelGrid>

		</rich:panel>

		<rich:modalPanel id="removeRolePanel" width="200" height="130"
			resizeable="true">

			<f:facet name="header">
				<h:outputText value="Διαγραφή Ρόλου ..." />
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<!-- <h:graphicImage value="/images/modal/close.png"
						style="cursor:pointer" id="hidelink" />
					 -->
					<a4j:commandLink value="[X]"
						onclick="Richfaces.hideModalPanel('removeRolePanel')" />
				</h:panelGroup>
			</f:facet>
			<h:outputText
				value="Ο Ρόλος θα διαγραφεί απο το σύστημα και η διαδικασία δεν είναι αναστρέψιμη."></h:outputText>
			<br />
			<br />
			<h:outputText value="Να γίνει η διαγραφή ?"></h:outputText>
			<br />
			<br />
			<a4j:form>
				<a4j:commandButton value="Ναι"
					action="#{roleManagement.removeRole()}"
					oncomplete="Richfaces.hideModalPanel('removeRolePanel')" />
				<rich:spacer width="15" />
				<a4j:commandButton value="Όχι" action="#{roleManagement.end()}"
					oncomplete="Richfaces.hideModalPanel('removeRolePanel')" />
			</a4j:form>
		</rich:modalPanel>

		<rich:modalPanel id="updateRoleTitlePanel" width="300" height="130"
			resizeable="true">

			<f:facet name="header">
				<h:outputText value="Αλλαγή Τίτλου Ρόλου ..." />
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<!-- <h:graphicImage value="/images/modal/close.png"
						style="cursor:pointer" id="hidelink" />
					 -->
					<a4j:commandLink value="[X]"
						onclick="Richfaces.hideModalPanel('updateRoleTitlePanel')" />
				</h:panelGroup>
			</f:facet>
			<h:outputLabel value="Αλλάξτε το τίτλο του Ρόλου στο παρακάτω πεδίο"
				for="updateRoleTitleInput" />
			<h:inputText id="updateRoleTitleInput" value="#{title}" size="30"
				maxlength="250" />
			<br />
			<br />
			<a4j:form>
				<a4j:commandButton value="Ανανέωση Τίτλου"
					action="#{roleManagement.removeRole()}"
					oncomplete="Richfaces.hideModalPanel('updateRoleTitlePanel')" />
				<rich:spacer width="15" />
				<a4j:commandButton value="Επιστροφή"
					action="#{roleManagement.end()}"
					oncomplete="Richfaces.hideModalPanel('updateRoleTitlePanel')" />
			</a4j:form>
		</rich:modalPanel>
	</ui:define>
</ui:composition>
</html>